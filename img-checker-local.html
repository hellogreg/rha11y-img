<!DOCTYPE html>
<html lang="en">
  <!-- https://rha11y-tools.netlify.app/ -->
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rha11y-imgchecker bookmarklet</title>
    <link rel="stylesheet" href="rha11y-tools.css" rel="stylesheet" />
    <script src="img-components.js"></script>
  </head>
  <body>
    <div class="page">
      <h1>rha11y-img-checker bookmarklet</h1>
      <p>
        These scripts are branded to <span class="rh-text">RHa11y</span>, Red Hat's accessibility
        volunteer group.
      </p>
      <p>To get the bookmarklet, drag the following link to your bookmarks bar:</p>
      <p>
        <strong
          ><a
            href='javascript:(()=>{let e=!0;function t(t){e&&(t=void 0!==t?t:" ",console.log(t))}function n(t){e&&t&&console.dir(t)}function i(e,t){e.setAttribute("data-a11y","Accessible: "+!!t),e.style.setProperty("outline",(t?"#09fd":"#f90d")+" solid 8px","important"),e.style.setProperty("outline-offset","-4px","important"),e.style.setProperty("border-radius","2px","important"),e.style.setProperty("filter","initial","important")}function o(e){return"img"===e.nodeName.toLowerCase()}function a(e){return"svg"===e.nodeName.toLowerCase()}function r(e){return!!e.shadowRoot}function l(e){return e=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.getRootNode().host:e}function d(e){let n=!1,i=e.nodeName;t("  Checking if "+i.toLowerCase()+" is hidden");let r=!!e.hidden;n=n||r,t("  - hidden attribute: "+r);let l="none"===getComputedStyle(e).display;n=n||l,t("  - display:none: "+l);let d="hidden"===getComputedStyle(e).visibility;n=n||d,t("  - visbility:hidden: "+d);let s=!!e.ariaHidden||"true"===e.getAttribute("aria-hidden");if(n=n||s,t("  - aria-hidden: "+s),o(e)||a(e)){let u="presentation"===e.getAttribute("role");n=n||u,t("  - role=presentation: "+u)}return!!n}function s(e){function n(e){return!!e&&"BODY"!==e.nodeName&&"HTML"!==e.nodeName&&e.nodeType!==Node.DOCUMENT_NODE&&e.nodeName}e=l(e);let i=!1;for(;!i&&n(e);)i=i||d(e),e=l(e=e.parentNode?e.parentNode:null),!i&&n(e)&&t("Next parent: "+e.nodeName.toLowerCase());return t("Either element or a parent is hidden: "+!!i),!!i}function u(e){let n=!!e.hasAttribute("alt");if(t("  - Has alt attribute: "+n),n){let i=e.getAttribute("alt")||"[decorative]";t("  - Image alt value: "+i)}return!!n}function c(e){let n="title"===e.firstElementChild.tagName&&!!e.firstElementChild.textContent;return t("  - Has <title>: "+!!n),n&&t("  - title: "+e.firstElementChild.textContent),!!n}function f(e){let n="img"===e.getAttribute("role");return t("  - Has role=img (not required/sufficient on its own): "+!!n),!!n}function g(e){let n=e.ariaLabel||e.getAttribute("aria-label"),i=!!n;return t("  - Has aria-label: "+i),i&&t("  - aria-label: "+n),!!i}function m(e){let t=document.getElementById(e);return t?t.textContent:null}function b(e){let n=e.ariaLabelledby||e.getAttribute("aria-labelledby"),i=!!n;t("  - Has aria-labelledby: "+i);let o,a=null;return i&&(a=!!(o=m(n)),t("  - aria-labelledby id: "+n),t("  - aria-labelledby value: "+o)),!!i}function h(e){let n=!1;t("Checking if <img> has an alt attribute"),(n=n||u(e))||(t("Checking if <img> or parent is hidden from assistive tech"),n=s(e)),t("<img> is accessible: "+n),i(e,n)}function y(e){let n=!1;t("Checking if inline <svg> has an accessible name"),f(e),(n=(n=(n=n||!!c(e))||!!g(e))||!!b(e))||(t("Checking if <svg> or parent is hidden from assistive tech"),n=s(e)),t("<svg> is accessible: "+n),i(e,n)}function p(e){n(e=l(e));let i=window.getComputedStyle(e).background,o=window.getComputedStyle(e).backgroundImage;e.style&&(i.match("url")||o.match("url")||o.match("var"))&&(t("Background image found. They are not tested."),e.style.setProperty("background-color","#fffd"),e.style.setProperty("background-blend-mode","color"))}let N=0;function C(e){let n=e.querySelectorAll("*");for(let i of n){if(o(i)&&(t(),t("Located an <img>"),t(i.outerHTML),h(i)),a(i)&&(t(),t("Located an <svg>"),t(i.outerHTML),y(i)),r(i)){let l=i.shadowRoot,d=l.getRootNode().host.nodeName||"[unspecified]";t("Entering "+d+" shadowRoot at nesting level "+(N+=1)),C(l)}p(i)}let s=e.getRootNode().host?e.getRootNode().host.nodeName:null;N>0&&s&&(t(),t("Exiting "+s+" shadowRoot at nesting level "+N),N-=1),t()}!function e(){t(),t("Initiating rha11y-img bookmarklet"),t();let n=document.body;C(n)}()})();'
            >rha11y-img-checker (local)</a
          ></strong
        >
      </p>
      <p>
        Go to the page you want to test, and then click the bookmarklet link. A blue outline means
        the image passed. Orange means it failed. Background images are not tested, as they don't
        need accessible names. View the browser console for detailed results.
      </p>
      <h2>Test images</h2>
      <h3>Inline SVGs</h3>
      <div class="cards">
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg01"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>Not hidden from screen readers</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg02"
            aria-hidden="true"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>aria-hidden="true"</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg03"
            role="presentation"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>role="presentation"</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg04"
            role="img"
          >
            <title>Red Hat</title>
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>Has title and img role</li>
            <li>Not hidden from assistive tech</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg05"
            aria-label="Red Hat"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>Has aria-label</li>
            <li>Not hidden from assistive tech</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg06"
            aria-labelledby="svglabel"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>Has aria-labelledby: <br /><em id="svglabel">Red Hat</em></li>
            <li>Not hidden from assistive tech</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
      </div>
      <h3>Non-shadow JPG &lt;img&gt; elements</h3>
      <div class="cards">
        <div>
          <img src="testimg.jpg?test=img01" />
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <span aria-hidden="true"><img src="testimg.jpg?test=img02" /></span>
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from assistive tech</li>
            <li>Has hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testimg.jpg?test=img03" alt />
          <ul>
            <li>Has alt (null)</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testimg.jpg?test=img04" alt="People computing" />
          <ul>
            <li>Has alt (with value)</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testimg.jpg?test=img05" role="presentation" />
          <ul>
            <li>Has no alt</li>
            <li>role="presentation"</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
      </div>
      <h3>Non-shadow SVG &lt;img&gt; elements</h3>
      <div class="cards">
        <div>
          <img src="testsvg.svg?test=svg01" />
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <span aria-hidden="true"><img src="testsvg.svg?test=svg02" /></span>
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from assistive tech</li>
            <li>assistive tech-hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testsvg.svg?test=svg03" alt />
          <ul>
            <li>Has alt (null)</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testsvg.svg?test=svg04" alt="People computing" />
          <ul>
            <li>Has alt (with value)</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testsvg.svg?test=svg05" role="presentation" />
          <ul>
            <li>Has no alt</li>
            <li>role="presentation"</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
      </div>
      <h3>Shadow &lt;img&gt; elements</h3>
      <div class="cards">
        <div>
          <wc-img></wc-img>
          <ul>
            <li>Image component</li>
            <li>Has no alt</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <wc-div></wc-div>
          <ul>
            <li>Image component...</li>
            <li>Nested in component...</li>
            <li>In another component</li>
            <li>Has no alt</li>
            <li>Not hidden from assistive tech</li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
      </div>
      <h3>Background image</h3>
      <div class="cards">
        <div>
          <p class="bg-image"></p>
          <ul>
            <li>Should not be tested</li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
